<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Volantino/Brochure – Visualizzatore PDF</title>
  <meta name="description" content="Visualizza Volantino.pdf come volantino/brochure con pulsanti laterali e animazioni fluide e moderne.">
  <style>
    :root{
      --bg:#0f172a;--paper:#fff;--muted:rgba(255,255,255,.85);
      --shadow:0 30px 80px rgba(0,0,0,.28); --anim:520ms;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;background:radial-gradient(1200px 800px at 20% 10%, #172554 0%, transparent 50%),
      radial-gradient(1200px 800px at 80% 90%, #1e293b 0%, transparent 50%),var(--bg);
      color:var(--muted);font:16px/1.5 system-ui,Segoe UI,Roboto,Arial;
      display:grid;grid-template-rows:auto 1fr auto;min-height:100dvh;
      overflow:hidden;
    }
    header,footer{padding:14px clamp(16px,3vw,28px);border-block:1px solid rgba(255,255,255,.06)}
    header{display:flex;align-items:center;justify-content:space-between;gap:1rem}
    .btn{appearance:none;border:0;border-radius:12px;padding:8px 14px;cursor:pointer;background:rgba(255,255,255,.12);color:#fff;transition:background .3s ease, transform .2s ease}
    .btn:hover{background:rgba(255,255,255,.25);transform:translateY(-2px)}
    .btn[aria-pressed="true"]{outline:2px solid rgba(255,255,255,.5)}
    .stage{position:relative;margin:clamp(16px,3vw,24px) auto;width:min(96vw,1200px);
      height:calc(100dvh - 200px);max-height:1200px;display:grid;place-items:center;touch-action:manipulation}
    .page-wrap{position:relative;width:100%;height:100%;display:grid;place-items:center;padding:clamp(8px,1.8vw,18px)}
    #canvasContainer{position:relative; perspective:1600px;}
    .spread{display:grid;grid-template-columns:1fr 1fr;gap:14px;align-items:center;justify-items:center}
    canvas{display:block;background:var(--paper);border-radius:16px;box-shadow:var(--shadow);max-width:100%;height:auto;transition:transform var(--anim) ease, opacity var(--anim) ease}
    .nav-btn{position:absolute;top:50%;translate:0 -50%;width:64px;height:96px;border:0;border-radius:16px;
      background:rgba(255,255,255,.14);color:#fff;box-shadow:0 8px 30px rgba(0,0,0,.25);cursor:pointer;
      display:grid;place-items:center;font-size:34px;backdrop-filter:blur(10px);opacity:.85;transition:opacity .3s ease, transform .2s ease}
    .nav-btn:hover{opacity:1;transform:scale(1.05)}
    .nav-btn[disabled]{opacity:.35;cursor:not-allowed;transform:none}
    .nav-prev{left:-12px}.nav-next{right:-12px}
    .page-indicator{position:absolute;bottom:12px;left:50%;translate:-50% 0;background:rgba(255,255,255,.12);
      color:#fff;padding:8px 14px;border-radius:999px;font-weight:700;box-shadow:0 6px 20px rgba(0,0,0,.25);pointer-events:none;backdrop-filter:blur(6px)}

    /* Animazioni fluide */
    .slide-left.enter canvas{transform:translateX(40px); opacity:0}
    .slide-left.enter.done canvas{transform:translateX(0); opacity:1}
    .slide-right.enter canvas{transform:translateX(-40px); opacity:0}
    .slide-right.enter.done canvas{transform:translateX(0); opacity:1}

    .flip-left.anim canvas, .flip-right.anim canvas{
      transform-origin:center; backface-visibility:hidden;
      animation:flip var(--anim) ease;
    }
    .flip-left.anim canvas{animation-name:flipLeft}
    .flip-right.anim canvas{animation-name:flipRight}

    @keyframes flipLeft{0%{transform:rotateY(0)}50%{transform:rotateY(-100deg)}100%{transform:rotateY(0)}}
    @keyframes flipRight{0%{transform:rotateY(0)}50%{transform:rotateY(100deg)}100%{transform:rotateY(0)}}
  </style>
</head>
<body>
  <header>
    <div><strong>Volantino/Brochure • Visualizzatore PDF</strong></div>
    <div style="display:flex;gap:.5rem;flex-wrap:wrap">
      <button id="toggleMode" class="btn" type="button" aria-pressed="false">Vista: singola</button>
      <button id="fitWidth" class="btn" type="button" aria-pressed="true">Adatta: larghezza</button>
      <button id="animMode" class="btn" type="button" aria-pressed="true">Animazione: flip</button>
      <a id="openPdf" class="btn" href="Volantino.pdf" target="_blank" rel="noopener">Apri PDF</a>
    </div>
  </header>

  <main class="stage" id="stage" aria-live="polite">
    <div class="page-wrap" id="pageWrap">
      <button class="nav-btn nav-prev" id="prevBtn" aria-label="Pagina precedente">&#x276E;</button>
      <div id="canvasContainer">
        <canvas id="canvasA" aria-label="Pagina del volantino"></canvas>
      </div>
      <button class="nav-btn nav-next" id="nextBtn" aria-label="Pagina successiva">&#x276F;</button>
      <div class="page-indicator" id="pageIndicator">Caricamento…</div>
    </div>
  </main>

  <footer>
    Usa ←/→ per navigare; tocca i lati su mobile. Aggiungi a URL: <code>?mode=spread</code> per vista brochure.
  </footer>

  <script src="index.js"></script>
</body>
</html>
